<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Through the Keyhole</title>
    <link rel="icon" href="WhBr-Rabbit-logo-golden-220609-v1.png" type="image/png">
    <script src="(link unavailable)"></script>
    <style>
        /* ... */
    </style>
</head>
<body>
    <div class="container">
        <a href="(link unavailable)">
            <img src="WhBr-Rabbit-logo-golden-220609-v1.png" class="logo pulse" alt="Logo" id="logo">
        </a>
        <h1>Through the Keyhole</h1>
        <h2>Lock XVII</h2>
        <button id="start-scanner-button" onclick="startScanner()">Scan QR Code</button>
        <div id="scanner">
            <video id="scanner-video" width="100%" height="100%"></video>
        </div>
        <div id="error-message"></div>
    </div>
    <script>
        function startScanner() {
            const codeReader = new ZXing.BrowserQRCodeReader();
            const scannerElement = document.getElementById('scanner');
            const scannerVideo = document.getElementById('scanner-video');
            scannerElement.style.display = 'block';

            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    scannerVideo.srcObject = stream;
                    return codeReader.decodeFromInputVideoDevice(undefined, 'scanner');
                })
                .then(result => {
                    console.log(result);
                    window.location.href = 'slider.html';
                })
                .catch(err => {
                    console.error(err);
                    showError('Failed to detect QR code. Please try again.');
                });
        }

        function showError(message) {
            document.getElementById('error-message').innerText = message;
        }
    </script>
</body>
</html>
